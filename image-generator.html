<script
        src="https://code.jquery.com/jquery-3.2.1.js"
        integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
        crossorigin="anonymous"></script>
<!--<script src="js.js"></script>-->
<canvas id="logo-generator" width="270" height="150">

</canvas>
<input id="city-name" type="text" placeholder="City Name" />
<input id="event-date" type="text" placeholder="Date" />
<button>
    test
</button>

<input type='file' id="fileUpload" />


<script>
    var ctx = document.getElementById('logo-generator').getContext('2d');
    var tomLogo = new Image;
    var companyTitle = "";
    var eventDate = "";
    var mainWidth = 270;
    tomLogo.src = "tomlogo.PNG";

    //"http://static1.squarespace.com/static/56d2f7d71bbee09a4bcca663/t/56dd49d00442620394904b1f/1502617146835/?format=1500w";

    ctx.beginPath();
    ctx.moveTo(1,1);
    ctx.lineTo(mainWidth,1);
    ctx.strokeStyle = '#de8975';
    ctx.stroke();
    ctx.moveTo(1,74);
    ctx.lineTo(mainWidth,74);
    ctx.stroke();
    ctx.font="24px sans-serif";
    tomLogo.onload = function(){
        ctx.drawImage(tomLogo,4,8,125.5,61.5);
//        ctx.drawImage(img, 0, 0, 300, 234);
    };
    //img.src = strDataURI;

    $('button').click( function() {
        var companyTitle = $('#city-name').val();
        var eventDate = $('#event-date').val();
        ctx.fillText(" : " + companyTitle, 128, 45);
        ctx.textAlign = "center";
        ctx.font="18px sans-serif";
        ctx.fillText(eventDate,  135, 95);
        //$( "#logo-generator" ).append("<p>" + companyTitle + " " + eventDate + "</p>" );
    });

    //test

    function el(id){return document.getElementById(id);} // Get elem by ID

    var canvas  = el("canvas");
//    var context = canvas.getContext("2d");

    function readImage() {
        if ( this.files && this.files[0] ) {
            var FR= new FileReader();
            FR.onload = function(e) {
                var img = new Image();
                img.addEventListener("load", function() {
                    var width = img.width/mainWidth;
                    console.log(width);
                    var height = img.height/width;
                    var canvasHeight = 150+height;
                    ctx.drawImage(img, 0, 0, mainWidth,height);
                    ctx.canvas.height = canvasHeight;

                });
                img.src = e.target.result;
            };
            FR.readAsDataURL( this.files[0] );
        }
    }

    el("fileUpload").addEventListener("change", readImage, false);
</script>
