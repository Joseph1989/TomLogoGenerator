<script
        src="https://code.jquery.com/jquery-3.2.1.js"
        integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
        crossorigin="anonymous"></script>
<!--<script src="js.js"></script>-->
<canvas id="logo-generator" width="270" height="150" style="background: #fff">

</canvas>
<input id="city-name" type="text" placeholder="City Name" />
<input id="event-date" type="text" placeholder="Date" />
<button>
    test
</button>

<input type='file' id="fileUpload" />


<script>
    var ctx = document.getElementById('logo-generator').getContext('2d');
    var tomLogo = new Image;
    var companyTitle = "";
    var eventDate = "";
    var height = 2;
    var mainWidth = 330;
    var mainHeigth = 150;
    var canvasHeight = mainHeigth;
    ctx.canvas.width = mainWidth;
    tomLogo.src = "tomlogo.PNG";

     function writeLogo() {
        var cityName = $('#city-name').val();
        var eventDate = $('#event-date').val();
        ctx.beginPath();
        ctx.moveTo(1,1+height);
        ctx.lineTo(mainWidth,1+height);
        ctx.strokeStyle = '#de8975';
        ctx.stroke();
        ctx.moveTo(1,74+height);
        ctx.lineTo(mainWidth,74+height);
        ctx.stroke();
        ctx.textAlign = "center";
        ctx.font="22px sans-serif";
        ctx.fillText(eventDate,  mainWidth/2, 98+height);
         ctx.drawImage(tomLogo,4,8+height,125,61);
         ctx.font="35px sans-serif";
         ctx.textAlign="left";
         ctx.fillText(" : " + cityName, 129, 47+height);
    }

    $('button').click(function() {
        ctx.clearRect(0, height, mainWidth, mainHeigth);
        writeLogo();
    });


    //test

    function el(id){return document.getElementById(id);} // Get elem by ID

    var canvas  = el("canvas");
//    var context = canvas.getContext("2d");

    function readImage() {
        if ( this.files && this.files[0] ) {
            var FR= new FileReader();
            FR.onload = function(e) {
                var img = new Image();
                img.addEventListener("load", function() {
                    canvasHeight = mainHeigth;
                    var width = img.width/mainWidth;
                    console.log(width);
                    height = img.height/width;
                    canvasHeight += height;
                    ctx.canvas.height = canvasHeight;
                    ctx.drawImage(img, 0, 0, mainWidth-1,height);
                    writeLogo();

                });
                img.src = e.target.result;
            };
            FR.readAsDataURL( this.files[0] );
        }
    }

    el("fileUpload").addEventListener("change", readImage, false);
</script>
